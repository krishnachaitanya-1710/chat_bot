<style>
    * {
        box-sizing: border-box;
    }

    .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px;
    }

    .icon-button {
        padding: 8px;
        cursor: pointer;
    }

    .chat-content {
        height: 400px;
        width: 100%;
        padding: 8px;
        overflow-y: auto;
    }

    .chat-action {
        display: flex;
        align-items: center;
    }

    .input-message-container {
        width: 100%;
        color: #ffffff;
    }

    .bot-message,
    .self-message {
        border-radius: 10px;
        padding: 8px 16px;
        margin: 4px;
        background-color: #3f51b5;
        max-width: 80%;
        width: fit-content;
    }

    .self-message {
        margin-left: auto;
    }

    .chat-content::-webkit-scrollbar-track {
        -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
        border-radius: 10px;
        background-color: #555;
    }

    .chat-content::-webkit-scrollbar {
        width: 8px;
        background-color: #555;
    }

    .chat-content::-webkit-scrollbar-thumb {
        border-radius: 10px;
        -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, .3);
        background-color: #3f51b5;
    }
</style>

<div>
    <div class="header">
        <h3 style="margin: 0">Chat Bot</h3>
        <div>
            <span class="icon-button" (click)="openHelpDialog()">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-question-lg" viewBox="0 0 16 16">
                    <path fill-rule="evenodd"
                        d="M4.475 5.458c-.284 0-.514-.237-.47-.517C4.28 3.24 5.576 2 7.825 2c2.25 0 3.767 1.36 3.767 3.215 0 1.344-.665 2.288-1.79 2.973-1.1.659-1.414 1.118-1.414 2.01v.03a.5.5 0 0 1-.5.5h-.77a.5.5 0 0 1-.5-.495l-.003-.2c-.043-1.221.477-2.001 1.645-2.712 1.03-.632 1.397-1.135 1.397-2.028 0-.979-.758-1.698-1.926-1.698-1.009 0-1.71.529-1.938 1.402-.066.254-.278.461-.54.461h-.777ZM7.496 14c.622 0 1.095-.474 1.095-1.09 0-.618-.473-1.092-1.095-1.092-.606 0-1.087.474-1.087 1.091S6.89 14 7.496 14" />
                </svg>
            </span>
            <span class="icon-button" (click)="openDeleteConfirmDialog()">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash"
                    viewBox="0 0 16 16">
                    <path
                        d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z" />
                    <path
                        d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z" />
                </svg>
            </span>
        </div>
    </div>
    <div class="chat-content">
        <div *ngFor="let message of messages">
            <div [ngClass]="message.type">
                <span [innerHTML]="message.content"></span>
                <div *ngIf="message.actions">
                    <a [href]="sanitizeUrl('javascript:void(0);')" (click)="selectMethod('create')">{{ labels.create
                        }}</a>
                    <br />
                    <a [href]="sanitizeUrl('javascript:void(0);')" (click)="selectMethod('delete')">{{ labels.delete
                        }}</a>
                    <br />
                    <a [href]="sanitizeUrl('javascript:void(0);')" (click)="selectMethod('update')">{{ labels.update
                        }}</a>
                </div>
                <div *ngIf="message.submitActions">
                    <a [href]="sanitizeUrl('javascript:void(0);')" (click)="onSubmit(true)">Yes</a>
                    or&nbsp;
                    <a [href]="sanitizeUrl('javascript:void(0);')" (click)="onSubmit(false)">No</a>
                </div>
            </div>
        </div>
    </div>
    <div class="chat-action">
        <mat-form-field class="input-message-container">
            <textarea matInput type="text" placeholder="Input any questions" (keydown.enter)="sendMessage()"
                [(ngModel)]="message"></textarea>
        </mat-form-field>
        <button mat-icon-button (click)="sendMessage()">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-send"
                viewBox="0 0 16 16">
                <path
                    d="M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576zm6.787-8.201L1.591 6.602l4.339 2.76z" />
            </svg>
        </button>
    </div>
</div>